<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <meta charset="utf-8" />
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.js"></script>
    <link href="Content/bootstrap.css" rel="stylesheet" />
    <style type="text/css">
        .child {
            width: 180px;
            height: 250px;
            margin-left: 8px;
            margin-top: 6px;
            border: 2px solid gray;
            background-color: #ebebeb;
        }
    </style>
</head>
<body>
    <div class="parent col-lg-12" id="masonry">
        <div class="child"></div>
        <div class="child"></div>
        <div class="child"></div>
        <div class="child"></div>
        <div class="child"></div>
        <div class="child"></div>
        <div class="child"></div>
        <div class="child"></div>
        <div class="child"></div>
        <div class="child"></div>
        <div class="child"></div>
        <div class="child"></div>
    </div>
    <script>
        var maxCount = 49;
        var everyCount = 6;
        var length = 0;
        var isLoading = true;
        var $container = $('#masonry');
        $(window).scroll(function () {
            if ($(document).height() - $(window).height() - $(document).scrollTop() < 20) {
                if (!isLoading) {
                    isLoading = true;
                    appendToMasonry();
                    isLoading = false;
                }
            }
        });

        function appendToMasonry() {
            var data = "";
            var l = Math.ceil(everyCount * length);
            var min = length * everyCount;
            if (everyCount * (length + 1) < maxCount) {
                var max = (length + 1) * everyCount;
                for (var i = min + 1; i < max; i++) {
                    data += " <div class='child'>i=" + i + "</div>";
                }
            }
            else
                return;
            data = $(data);
            $container.append(data).masonry('appended', data);
            //masonry("addItems", data).masonry('reloadItems');
            //$container.masonry({
            //    itemSelector: '.thumbnail',
            //    isAnimated: true,
            //    isFitWidth: false
            //});
        }

        $(function () {
            $container.masonry({
                itemSelector: '.child',
                transitionDuration: '0.5s',
                isAnimated: true
            });
            isLoading = false;
        });
    </script>
</body>
</html>
